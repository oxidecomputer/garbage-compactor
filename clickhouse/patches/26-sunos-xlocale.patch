From 96a713747b474ff8afd336a6b2763fc9a13d8282 Mon Sep 17 00:00:00 2001
From: Alex Wilson <alex@cooperi.net>
Date: Tue, 30 May 2023 13:11:10 +1000
Subject: [PATCH 24/42] 26-sunos-xlocale.patch

---
 contrib/libcxx-cmake/CMakeLists.txt            | 6 ++++++
 contrib/libcxx/src/support/solaris/xlocale.cpp | 3 ++-
 2 files changed, 8 insertions(+), 1 deletion(-)

diff --git a/contrib/libcxx-cmake/CMakeLists.txt b/contrib/libcxx-cmake/CMakeLists.txt
index a501c4df64..8bc3f53de9 100644
--- a/contrib/libcxx-cmake/CMakeLists.txt
+++ b/contrib/libcxx-cmake/CMakeLists.txt
@@ -51,6 +51,12 @@ set(SRCS
 "${LIBCXX_SOURCE_DIR}/src/vector.cpp"
 )
 
+if (OS_SUNOS)
+    set (SRCS ${SRCS}
+        "${LIBCXX_SOURCE_DIR}/src/support/solaris/xlocale.cpp"
+    )
+endif()
+
 add_library(cxx ${SRCS})
 set_target_properties(cxx PROPERTIES FOLDER "contrib/libcxx-cmake")
 
diff --git a/contrib/libcxx/src/support/solaris/xlocale.cpp b/contrib/libcxx/src/support/solaris/xlocale.cpp
index d25adcd21d..2e13391c3c 100644
--- a/contrib/libcxx/src/support/solaris/xlocale.cpp
+++ b/contrib/libcxx/src/support/solaris/xlocale.cpp
@@ -11,7 +11,8 @@
 #include "__support/solaris/xlocale.h"
 #include <stdarg.h>
 #include <stdio.h>
-#include <sys/localedef.h>
+#include <ctype.h>
+#include <wchar.h>
 
 extern "C" {
 
-- 
2.40.1

